<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>N64 Core - Optimized</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #000; }
        #game { width: 100%; height: 100%; }
    </style>
</head>
<body>
    <div id="game"></div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const romPath = urlParams.get('rom');

        // DIAGNOSTIC: If the path is empty, alert the user
        if (!romPath) {
            alert("Error: No ROM path found in the URL!");
        }

        // We must attach these to the 'window' for the loader to see them
        window.EJS_player = '#game';
        window.EJS_core = 'n64'; 
        window.EJS_gameUrl = romPath;
        
        window.EJS_pathtodata = 'https://cdn.jsdelivr.net/gh/linuxguist/emulatorjs@main/data/';
        
        window.EJS_Settings = {
            low_res: true,
            threads: true,
            startOnLoaded: true,
            quality: 'low'
        };
    </script>
    <script src="https://cdn.jsdelivr.net/gh/linuxguist/emulatorjs@main/data/loader.js"></script>
</body>
</html>